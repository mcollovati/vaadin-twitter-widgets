<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="tws-loader.html">
<link rel="import" href="tws-common.html">

<dom-module id="tws-tweet">
    <template>
        <div id="twsContainer"></div>
    </template>

    <script>
        class TwsTweet extends TwsCommonsMixin(Polymer.Element) {

            constructor() {
                super();
            }

            static get is() {
                return 'tws-tweet'
            }

            static get optsNames() {
                return ["align", "conversation", "cards", "linkColor", "theme"];
            }

            static get properties() {
                return {
                    conversation: String,
                    cards: String,
                    linkColor: String,
                    theme: String
                }
            }

            _render(opts) {
                this.$.twsContainer.querySelectorAll('*').forEach(el => el.remove());
                window.twttr.widgets.createTweet(
                    this.primaryArgument, this.$.twsContainer, opts
                ).then(el => console.log("Tweet loaded", el));
            }

        }
        customElements.define(TwsTweet.is, TwsTweet);
    </script>
</dom-module>
