
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/marked-element/marked-element.html">
<script src="../bower_components/highlightjs/9.12.0/highlight.pack.min.js"></script>

<dom-module id="markdown-element">
    <link rel="import" type="css" href="../bower_components/highlightjs/9.12.0/styles/atom-one-dark.css">

    <template>
        <marked-element markdown="[[markdown]]" on-syntax-highlight="highlight">
            <div slot="markdown-html"></div>
        </marked-element>
    </template>


    <script>
        class MarkdownElement extends Polymer.Element {
            static get is() {
                return 'markdown-element'
            }
            static get properties() {
                return {
                    markdown: String
                }
            }
            highlight(event) {
                if (hljs) {
                    let code = event.detail.code;
                    let highlighted = hljs.highlight(event.detail.lang, code);
                    event.detail.code = '<div class="hljs">' + (highlighted.value || code) + '</div>';
                }
            }
        }
        customElements.define(MarkdownElement.is, MarkdownElement);
    </script>
</dom-module>
